version: "3.1"

services:
  parse-server:
    image: parseplatform/parse-server:latest
    container_name: parse-server
    environment:
      - PARSE_SERVER_APPLICATION_ID=${PARSE_SERVER_APPLICATION_ID}
      - PARSE_SERVER_MASTER_KEY=${PARSE_SERVER_MASTER_KEY}
      - PARSE_SERVER_DATABASE_URI=${PARSE_SERVER_DATABASE_URI}
      - PARSE_SERVER_CLOUD_CODE_MAIN=${PARSE_SERVER_CLOUD_CODE_MAIN}
    volumes:
      - ./parse-server/cloud:/parse-server/cloud
    ports:
      - 1337:1337
    restart: unless-stopped

  parse-dashboard:
    image: parseplatform/parse-dashboard:latest
    container_name: parse-dashboard
    command: "--config /parse-dashboard/parse-dashboard-config.json --allowInsecureHTTP"
    volumes:
      - ./parse-dashboard-config.json:/parse-dashboard/parse-dashboard-config.json
    ports:
      - 4040:4040
    restart: unless-stopped
